<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-hand-tracking-component"></script>
    <script>
      AFRAME.registerComponent('scale-on-pinching', {
        schema: { factor: { type: 'number', default: 0.005 } },
        init: function () {
          this.el.sceneEl.addEventListener('pinchstarted', (event) => {
            this.startScale = this.el.object3D.scale.clone();
            this.pinchStartDistance = event.detail.distance;
          });

          this.el.sceneEl.addEventListener('pinchmoved', (event) => {
            if (this.pinchStartDistance) {
              let scaleFactor =
                1 + (event.detail.distance - this.pinchStartDistance) * this.data.factor;
              this.el.object3D.scale.set(
                this.startScale.x * scaleFactor,
                this.startScale.y * scaleFactor,
                this.startScale.z * scaleFactor
              );
            }
          });

          this.el.sceneEl.addEventListener('pinchended', () => {
            this.pinchStartDistance = null;
          });
        },
      });
    </script>
  </head>
  <body>
    <a-scene hand-tracking>
      <a-camera position="0 1.6 2"></a-camera>
      
      <a-entity id="right-hand" hand-tracking-controls="hand: right"></a-entity>
      <a-entity id="left-hand" hand-tracking-controls="hand: left"></a-entity>
      
      <a-box id="box" position="0 1.5 1.2" color="blue" scale-on-pinching></a-box>
    </a-scene>
  </body>
</html>
